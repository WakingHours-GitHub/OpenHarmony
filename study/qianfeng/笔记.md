移动应用开发的介绍



 ![](C:\Users\HP\AppData\Roaming\Typora\typora-user-images\image-20220320161820813.png)

---



## 三.第一个鸿蒙应用:

### 3.1开发准备



### 3.2创建鸿蒙应用



### 3.3鸿蒙开发目录结构

![image-20220320212116252](C:\Users\HP\AppData\Roaming\Typora\typora-user-images\image-20220320212116252.png)

### 3.4运行项目

直接在右上角中点击运行即可启动模拟器, 进行我们应用的仿真

![image-20220321185634012](C:\Users\HP\AppData\Roaming\Typora\typora-user-images\image-20220321185634012.png)

### 3.5应用启动流程：

#### 3.5.1config.json

> config.json是鸿蒙应用的主配置文件

- app配置: app中的信息就构成了鸿蒙应用中的唯一标识.

  - bundleName:应用的唯一标识
  - version应用的版本
  - ![image-20220320214425275](C:\Users\HP\AppData\Roaming\Typora\typora-user-images\image-20220320214425275.png)-

- model配置: 是用来声明当前应用的信息(包, 主类, 住Ability, 功能模块声明, 适配设备类型等...)

  - mainAbility: 声明当前应用启动时默认加载的Ability

  - deviceType: 声明当前应用适配的设备类型

  - abilities(是个数组): 配置当前应用中的每个Ability配置信息.  其实就是需要让系统知道你有这个Ability的, 所以需要声明

    其中:

    - name: 就是声明的Ability路径+名字
    - icon: 就是图标
    - description: 
    - label: 就是页面左上角显示的名字, 也就是页面显示的标题
    - type: 就是Ability的类型, 是page?还是data,还是severs
    - ![image-20220320221654387](C:\Users\HP\AppData\Roaming\Typora\typora-user-images\image-20220320221654387.png)







#### 3.5.2应用启动流程



- 启动鸿蒙应用，就会加载config.json文件, 根据`mainAbility`配置加载启动应用的主界面。

  ```json
  "mainAbility": "com.example.dome01.MainAbility", 
  ```

- 执行`MainAbility`的`onStart`方法

  MainAbility是一个显示界面的容器,在`onStart`方法中,通过调用`setMainRoute`方法来指定当前页面容器中显示的视图页面, 而`MainAbilitySlice`就是这个视图页面.

  所以显示什么, 就是由我们的`MainAbilitySlice`来决定的.

  ```java
  // 在onStart方法中, 就仅仅执行这两条语句
  super.onStart(intent);
  // MainAbilitySlice就是一个界面, 
  super.setMainRoute(MainAbilitySlice.class.getName());
  ```

- 执行MainAbilitySlice中的`onStart`完成页面的渲染

  slice是一个界面, 界面中显示什么试图, 就是通过onStart方法来加载渲染的

  ```java
  public void onStart(Intent intent) {
      super.onStart(intent);
      super.setUIContent(ResourceTable.Layout_ability_main);
      // 在当前slice中渲染视图组件有两种方式
      // 1. 基于Java代码的渲染
      // 2. 基于xml文件渲染(default) -> setUIContent(xml文件引用)
  }
  ```

  

- 最终的结构:<img src="C:\Users\HP\AppData\Roaming\Typora\typora-user-images\image-20220321185010566.png" alt="image-20220321185010566" style="zoom:50%;" />



---

上面的启动过程,为什么是这样的呢, 实际上是跟我们的Ability框架有关, 所以我们就来学习一下Ability框架.

## 四.Ability框架的学习

![image-20220321194335789](C:\Users\HP\AppData\Roaming\Typora\typora-user-images\image-20220321194335789.png)

Ability其实就是一个功能，Ability中还分ParticleAbility和FeatureAbility, 其中FA是页面的, PA是底层支持的. 我们一个项目可以有多个功能, 也就是可以有多个Ability, 而Ability中可以有多个FA, 而FA有可以有多个PA.

- FA支持[Page Ability](https://developer.harmonyos.com/cn/docs/documentation/doc-guides/ability-page-concept-0000000000033573)：
- PA支持[Service Ability](https://developer.harmonyos.com/cn/docs/documentation/doc-guides/ability-service-concept-0000000000044457)和[Data Ability](https://developer.harmonyos.com/cn/docs/documentation/doc-guides/ability-data-concept-0000000000043058)：

### 4.1Ability介绍:

Ability是应用所具备能力的抽象，也是应用程序的重要组成部分。一个应用可以具备多种能力（即可以包含多个Ability），HarmonyOS支持应用以Ability为单位进行部署。Ability可以分为FA（Feature Ability）和PA（Particle Ability）两种类型，每种类型为开发者提供了不同的模板，以便实现不同的业务功能。

- FA支持

  - Page Ability

  Page模板是FA唯一支持的模板，用于提供与用户交互的能力。一个Page实例可以包含一组相关页面，每个页面用一个AbilitySlice实例表示。

- PA支持

  - Service模板：用于提供后台运行任务的能力。
  - Data模板：用于对外部提供统一的数据访问抽象。

### 4.2PageAbility

Page模板（以下简称“Page”）是FA唯一支持的模板，用于提供与用户交互的能力。一个**Page**可以由一个或多个AbilitySlice构成，AbilitySlice是指应用的单个页面及其控制逻辑的总和, 就相当于一个HTML文件,   。

作用: 对外呈现一个试图页面.用于提供与用户交互的能力.

> 一个Ability可以包含多个slice, 并且再不同的slice之间, 我们可以进行页间跳转.

#### 4.2.1创建AbilitySlice

- AbilitySlice创建再slice包中
- 创建步骤
  - 创建类并继承`MainAbilitySlice`类
  - 在`resources/base/layout`中创建布局文件
  - 在新创建的`AbilitySlice`类中重写`onStart`方法, 调用setUIContent方法, 加载布局文件. 通过`ResourceTable`加载resource目录下的资源. 



#### 4.2.2PageAbility生命周期

> 一个Page中可以包含多个Slice, 但是只能同时显示一个slice, 如何设置PageAbility默认显示的slice.
>
> 在一个PageAbility中,提供了多个声明周期方法, 这些方法在当前PageAbility加载的不同阶段会自动调用.
